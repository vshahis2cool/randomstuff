import random
import sys




print("")
print("Welcome to Otocat714's Crappy adventure game that will be the opposite of a corn maze")
name = input("Please imput your name, social security number, or mental state\n")
print("Hello, ",name)
print("Because im lazy and don't want to think of proper game design right now, the gameplay will be as follows")
print("You are going to be playing a equivilent of offbrand pokemon but you don't have any pokemon")
print("what I just said is totaly wrong and this is accualy a deck building game")





#Base Player setup
HP = 10
ATK = 1
DF = 1
HP = 10
Deck = [0,1,2,3]
Hand_limit = 2
Discard = []




#Data
#moves data
cards_atk = (1,2,-1,-2)
cards_def = (1,2,3,4)
cards_names = ("ATK 1","ATK 2","HEAL 1","HEAL 2")
cards_description = ("Deals 1 damage","deals 2 damage","deals -1 damage","deals -2 damage")
#enemies data
allenemies_MaxHP = (5,10)
allenemies_desplayname = ("skeliton","zombie")
allenemies_atk = (4,2)
#map saves
map_saves = []
map_saves_location = []
submap_saves = []
submap_saves_location = []
biome_list = (0,1,2,3)
locations = ["Player"]
locations_location = ["0,0"]
locations_map_location = ["14,14"]
gamestate = 0





#temp, sets the current encounter to random 1-2
enemy = random.randint(0,0)
#temp, sets the current turn to player
turn = 1




def Encoutner_setup():
    global enemyHPBar
    global enemyMaxHP
    global enemyHP
    global enemydesplayname
    global HPBar
    global HPBardesplay
    global MaxHP
    global Hand
    global Discard
    global HP
    global Handdelt
    Handdelt = 0




    enemydesplayname = allenemies_desplayname[enemy]
    enemyMaxHP = allenemies_MaxHP[enemy]
    enemyHP = enemyMaxHP
    if enemyMaxHP <= 10:
        enemyHPBar = 10
    else:
        enemyHPBar = 10
        while enemyHPBar <= ((enemyMaxHP-10)/(enemyHPBar*0.1)):
            enemyHPBar += 1
        enemyHPBar -= 1
    enemyHPBardesplaycounter = 0
    enemyHPBardesplay = ""
    while enemyHPBardesplaycounter < enemyHPBar:
        enemyHPBardesplay += "â™¥"
        enemyHPBardesplaycounter += 1



    MaxHP = HP
    if MaxHP <= 10:
        HPBar = 10
    else:
        HPBar = 10
        while HPBar <= ((MaxHP-10)/(HPBar*0.1)):
            HPBar += 1
        HPBar -= 1
    HPBardesplaycounter = 0
    HPBardesplay =""
    while HPBardesplaycounter < HPBar:
        HPBardesplay += "â™¥"
        HPBardesplaycounter += 1
    if HPBar<=0:
        print("You lost lol")
        sys.exit()

    
    




#Hud
def Refresh_hud():
    #start of enemy HP bar refresh
    global enemyHPBar
    global enemyMaxHP
    global enemyHP
    global enemydesplayname
    global HPBar
    global HPBardesplay
    global MaxHP
    global Hand
    global Discard
    global HP
    global turn
    global Deck
    global Handdelt


    enemyHPBardesplay = ""
    enemyHPBardesplaycounter = 0
    enemyHPBarrefresh = enemyHPBar
    enemyHPBarrefresh *= enemyHP/enemyMaxHP
    while enemyHPBardesplaycounter < enemyHPBarrefresh:
        enemyHPBardesplay += "â™¥"
        enemyHPBardesplaycounter += 1
    while enemyHPBardesplaycounter < enemyHPBar:
        enemyHPBardesplay += "ðŸ’”"
        enemyHPBardesplaycounter += 1
    
    HPBardesplay = ""
    HPBardesplaycounter = 0
    HPBarrefresh = HPBar
    HPBarrefresh *= HP/MaxHP
    while HPBardesplaycounter < HPBarrefresh:
        HPBardesplay += "â™¥"
        HPBardesplaycounter += 1
    while HPBardesplaycounter < HPBar:
        HPBardesplay += "ðŸ’”"
        HPBardesplaycounter += 1

    #Hand dealing
    if Handdelt == 0:
        Hand = []
        temp3 = 0
        while len(Hand) < Hand_limit and temp3 == 0:
            if len(Deck) == 0:
                if Discard == 0:
                    temp3 = 1
                else:    
                    Deck = Discard
                    Discard = []
            else:
                temp = random.randint(0,len(Deck)-1)
                temp2 = Deck[temp]
                Deck.pop(temp)
                Hand.append(temp2)
        Handdelt = 1

    count = 0
    
    #end of HP bar refresh
    #desplay
    print("1>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")
    print("2",enemydesplayname,"<",enemyHPBardesplay,">")
    print("3")
    print("4")
    print("5")
    print("6")
    print("7")
    print("8")
    print("9>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")
    print("10",name,"<",HPBardesplay,">")
    #11- (Hand)
    while count < len(Hand):
        print(count+11,cards_names[Hand[count]])
        count += 1
    print(len(Hand)+11,"Pass")
    #spacer
    print()
    
    if turn == 1:
        valid_awnsers = [2,3,4,5,6,7,8,10,len(Hand)+11]

        count = 11
        while len(valid_awnsers) - 9 < len(Hand):
            valid_awnsers.append(count)
            count += 1
    
        idiotloop = 0
        while idiotloop == 0:
            try:
                examine = int(input("Insert # to examine\n"))
            except:
                print("Invalid input, valid inputs include",valid_awnsers)
            else:
                idiotloop = 1



    
        idiotloop = 0
        while idiotloop == 0:
            count = valid_awnsers.count(examine)
            if examine in valid_awnsers:
                idiotloop = 1
            else:
                print("Invalid input, valid inputs include",valid_awnsers)
                examine = int(input())
        
        print("---------------------------------------------")
        if examine == 2:
            print("Your opponent")
            #might later add stuff here for closer examination if they have a certain item
        if examine > 2 and examine < 9:
            print("currently empty space, I might add ACCSI art here later")
            print("probobly not though that would be a pain in the butt")
        if examine == 10:
            print("Its you!")
            print("HP:",HP)
            print("Max HP:",MaxHP)
            if HP/MaxHP < 0.1:
                print("might not be soon though")
        if examine > 10 and examine < len(Hand)+11:
            print("Action : "+cards_names[Hand[examine-11]])
            print("Description : "+cards_description[Hand[examine-11]])
            temp = input("Press enter to go back, input 0 to target self, 1 to target opponent\n")
            if temp == "0" or temp == "1":
                Play_card(Hand[examine-11],int(temp))
        elif examine == len(Hand)+11:
            print("End turn")
            temp = input("Press enter to go back, input 1 to continue\n")
            if temp == "1":
                turn = 0
                while len(Hand) > 0:
                    Discard.append(Hand[0])
                    Hand.pop(0)
    else:
        HP -= allenemies_atk[enemy]
        print("You took",allenemies_atk[enemy],"damage")
        turn = 1
        Handdelt = 0
        
        
                

        
    
    print()
    print("--------------------------------------------")
    input("press enter to continue\n")

def Play_card(card,target):
    global enemyHP
    global enemyMaxHP
    global HP
    global enemyHP
    if target == 1:
        enemyHP -= cards_atk[card]
    if target == 0:
        HP -= cards_atk[card]
    print("you did ",cards_atk[card], "damage")
    if enemyHP > enemyMaxHP:
        enemyHP = enemyMaxHP
    if HP > MaxHP:
        HP = MaxHP

    
    Discard.append(card)
    Hand.remove(card)





def Generate_Map():
    pass
















def Refresh_Map(map):
    global map_saves
    global map_saves_location
    global submap_saves
    global submap_saves_location
    global locations
    global locations_location
    global locations_map_location
    global gamestate
    map1  = []
    map2  = []
    map3  = []
    map4  = []
    map5  = []
    map6  = []
    map7  = []
    map8  = []
    map9  = []
    map10 = []
    map11 = []
    map12 = []
    map13 = []
    map14 = []
    map15 = []
    map16 = []
    map17 = []
    map18 = []
    map19 = []
    map20 = []
    map21 = []
    map22 = []
    map23 = []
    map24 = []
    map25 = []
    map26 = []
    map27 = []
    map28 = []
    map29 = []
    map30 = []







    
    #decompiliation
    if map.startswith("S_") == True:
        map_loading = submap_saves[submap_saves_location.index(map)]
    else:
        map_loading = map_saves[map_saves_location.index(map)]
    


    temp = map_saves[0].split("/")
    temp5 = [map1,map2,map3,map4,map5,map6,map7,map8,map9,map10,map11,map12,map13,map14,map15,map16,map17,map18,map19,map20,map21,map22,map23,map24,map25,map26,map27,map28,map29,map30]

    # number - icon
    '''
    0 - water
    1 - Trees
    2 - Plains
    3 - Mountans
    '''




    for x in range(30):
        temp2 = temp[x]
        temp3 = temp2.split("_")
        for i in range(30):
            #translates string into the accual desplay
            if int(temp3[i]) == 0:
                temp4 = "\u26C6"
            if int(temp3[i]) == 1:
                temp4 = "\u2667"
            if int(temp3[i]) == 2:
                temp4 = "\u2637"
            if int(temp3[i]) == 3:
                temp4 = "\u26F0"
            #adds it to the map desplay
            temp5[x].append(temp4)
            temp5[x].append(" ")
            
    #I did not in fact need to enumerate, I just needed for line 384 to refrance x instead of i, and same for line 369, I think the intire problem stemed from me hurriedly finishing this up and not dubble checking it before I had to go    
    
    #other stuff like towns and caves
    this_location_elements = locations_location
    this_location_locations = locations
    this_location_map_locations = locations_map_location
    for i in range(len(this_location_elements)):
        if this_location_elements[i] == map:
            pass
        else:
            this_location_elements.pop(i)
            this_location_locations.pop(i)
            this_location_map_locations.pop(i)
    maps = [map1,map2,map3,map4,map5,map6,map7,map8,map9,map10,map11,map12,map13,map14,map15,map16,map17,map18,map19,map20,map21,map22,map23,map24,map25,map26,map27,map28,map29,map30]

    for i in range(len(this_location_elements)):
        map_location_split = this_location_map_locations[i].split(",")
        maps[int(map_location_split[1])].pop(int(map_location_split[0])*2)
        if this_location_locations[i] == "Player":
            desplay_element = "\u265F"

        maps[int(map_location_split[1])].insert(int(map_location_split[0])*2,desplay_element)







    #printing the map
    print(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")
    for x in map1:
        print(x,end="")
    print()
    for x in map2:
        print(x,end="")
    print()
    for x in map3:
        print(x,end="")
    print()
    for x in map4:
        print(x,end="")
    print()
    for x in map5:
        print(x,end="")
    print()
    for x in map6:
        print(x,end="")
    print()
    for x in map7:
        print(x,end="")
    print()
    for x in map8:
        print(x,end="")
    print()
    for x in map9:
        print(x,end="")
    print()
    for x in map10:
        print(x,end="")
    print()
    for x in map11:
        print(x,end="")
    print()
    for x in map12:
        print(x,end="")
    print()
    for x in map13:
        print(x,end="")
    print()
    for x in map14:
        print(x,end="")
    print()
    for x in map15:
        print(x,end="")
    print()
    for x in map16:
        print(x,end="")
    print()
    for x in map17:
        print(x,end="")
    print()
    for x in map18:
        print(x,end="")
    print()
    for x in map19:
        print(x,end="")
    print()
    for x in map20:
        print(x,end="")
    print()
    for x in map21:
        print(x,end="")
    print()
    for x in map22:
        print(x,end="")
    print()
    for x in map23:
        print(x,end="")
    print()
    for x in map24:
        print(x,end="")
    print()
    for x in map25:
        print(x,end="")
    print()
    for x in map26:
        print(x,end="")
    print()
    for x in map27:
        print(x,end="")
    print()
    for x in map28:
        print(x,end="")
    print()
    for x in map29:
        print(x,end="")
    print()
    for x in map30:
        print(x,end="")
    print()
    print(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")
    valid_awnsers = ["W","A","S","D","w","a","s","d"]
    idiotloop = 0
    while idiotloop == 0:
        try:
            examine = input()
            if examine in valid_awnsers:
                pass
            else:
                raise
        except:
            print("Invalid input, valid inputs include",valid_awnsers)
        else:
            idiotloop = 1
            #battle_chance()
    if examine == "W" or examine =="w":
        print(locations_map_location)
        listlocation = locations.index("Player")
        player_location = locations_map_location[listlocation].split(",")
        player_locationx = int(player_location[0])
        player_locationy = int(player_location[1])
        player_locationy -= 1
        locations_map_location.pop(listlocation)
        locations_map_location.insert(listlocation,(str(player_locationx)+","+str(player_locationy)))
        print(locations_map_location)
    if examine == "S" or examine =="s":
        print(locations_map_location)
        listlocation = locations.index("Player")
        player_location = locations_map_location[listlocation].split(",")
        player_locationx = int(player_location[0])
        player_locationy = int(player_location[1])
        player_locationy += 1
        locations_map_location.pop(listlocation)
        locations_map_location.insert(listlocation,(str(player_locationx)+","+str(player_locationy)))
        print(locations_map_location)
    if examine == "A" or examine == "a":
        print(locations_map_location)
        listlocation = locations.index("Player")
        player_location = locations_map_location[listlocation].split(",")
        player_locationx = int(player_location[0])
        player_locationy = int(player_location[1])
        player_locationx -= 1
        locations_map_location.pop(listlocation)
        locations_map_location.insert(listlocation,(str(player_locationx)+","+str(player_locationy)))
        print(locations_map_location)
    if examine == "D" or examine == "d":
        print(locations_map_location)
        listlocation = locations.index("Player")
        player_location = locations_map_location[listlocation].split(",")
        player_locationx = int(player_location[0])
        player_locationy = int(player_location[1])
        player_locationx += 1
        locations_map_location.pop(listlocation)
        locations_map_location.insert(listlocation,(str(player_locationx)+","+str(player_locationy)))
        print(locations_map_location)
        r = random.randint(1,5)
        if r == 1:
            gamestate=1
def Generate_Map(map_location):
    global map_saves
    global map_saves_location
    global submap_saves
    global submap_saves_location
    global biome_list


    map1  = []
    map2  = []
    map3  = []
    map4  = []
    map5  = []
    map6  = []
    map7  = []
    map8  = []
    map9  = []
    map10 = []
    map11 = []
    map12 = []
    map13 = []
    map14 = []
    map15 = []
    map16 = []
    map17 = []
    map18 = []
    map19 = []
    map20 = []
    map21 = []
    map22 = []
    map23 = []
    map24 = []
    map25 = []
    map26 = []
    map27 = []
    map28 = []
    map29 = []
    map30 = []
    maps_list = [map1,map2,map3,map4,map5,map6,map7,map8,map9,map10,map11,map12,map13,map14,map15,map16,map17,map18,map19,map20,map21,map22,map23,map24,map25,map26,map27,map28,map29,map30]

    if map_location.startswith("S_") == False:
        
        
        
        
        #detects if there are maps around it
        temp1 = map_location.split(",")
        tempx = int(temp1[0])
        tempy = int(temp1[1])
        tempxtest = tempx + 1
        temptest = str(tempxtest)+","+str(tempy)
        try:
            map_r = map_saves_location.index(temptest)
        except:
            map_r = "N/A"
        tempxtest = tempx - 1
        temptest = str(tempxtest)+","+str(tempy)
        try:
            map_l = map_saves_location.index(temptest)
        except:
            map_l = "N/A"
        tempytest = tempy + 1
        temptest = str(tempx)+","+str(tempytest)
        try:
            map_u = map_saves_location(temptest)
        except:
            map_u = "N/A"
        tempytest = tempy - 1
        temptest = str(tempx)+","+str(tempytest)
        try:
            map_d = map_saves_location(temptest)
        except:
            map_d = "N/A"
        
        
        #decompiles maps edges around it

        if map_l == "N/A":
            pass
        else:
            temp1 = map_saves[map_l].split("/")
            map_l = []
            for x in range(30):
                temp2 = temp1[x].split("_")
                map_l.append(temp2[29])
        if map_r == "N/A":
            pass
        else:
            temp1 = map_saves[map_r].split("/")
            map_r = []
            for x in range(30):
                temp2 = temp1[x].split("_")
                map_r.append(temp2[29])
        if map_u == "N/A":
            pass
        else:
            temp1 = map_saves[map_u].split("/")
            map_u = []
            for x in range(30):
                temp2 = temp1[x].split("_")
                map_u.append(temp2[29])
        if map_d == "N/A":
            pass
        else:
            temp1 = map_saves[map_d].split("/")
            map_d = []
            for x in range(30):
                temp2 = temp1[x].split("_")
                map_d.append(temp2[29])

        Generated_map = []
        
        map_assemble = ""
        for x in range(30):
            for i in range(30):

                
                #detects sourounding areas
                biome_chances = []
                if x == 0:
                    if map_u == "N/A" or len(map_u) < i+1:
                        pass
                    else:
                        biome_chances.append(map_u[i])
                elif map_u == "N/A" or len(map_u) < i+1:
                    pass
                else:
                    biome_chances.append(map_u[i])
                if x == 29:
                    if map_d == "N/A" or len(map_d) < i+1:
                        pass
                    else:
                        biome_chances.append(map_d[i])
                elif map_d == "N/A" or len(map_d) < i+1:
                    pass
                else:
                    biome_chances.append(map_d[i])
                if i == 0:
                    if map_l == "N/A" or len(map_l) < i+1:
                        pass
                    else:
                        biome_chances.append(map_l[i])
                elif map_l == "N/A" or len(map_l) < i+1:
                    pass
                else:
                    biome_chances.append(map_l[i-1])
                if i == 29:
                    if map_r == "N/A" or len(map_r) < i+1:
                        pass
                    else:
                        biome_chances.append(map_r[i])
                elif map_r == "N/A" or len(map_r) < i+1:
                    pass
                else:
                    biome_chances.append(map_r[i+1])

                #calculates chances for each biome depending on sourounding area
                #95% chance to be one of the biomes around it
                #5% chance to be a new biome
                if len(biome_chances) == 0:
                    biome = random.randint(0,len(biome_list)-1)

                if len(biome_chances) >= 1:
                    randombiome = random.randint(0,100)
                    if randombiome <= 95:
                        biome = biome_chances[random.randint(0,len(biome_chances)-1)]

                    else:
                        biome = random.randint(0,len(biome_list)-1)



                #saves data in a list
                if map_u == "N/A":
                    map_u = []
                if map_l == "N/A":
                    map_l = []
                maps_list[x].append(str(biome))
                map_l.insert(i,str(biome))
                try:
                    map_l.pop(i+1)
                except:
                    pass
                map_u.insert(i,str(biome))
                try:
                    map_u.pop(i+1)
                except:
                    pass
                map_assemble += str(biome)+"_"
            map_assemble += "/"
        map_saves.append(map_assemble)
        map_saves_location.append(map_location)
    else:
        print("you havnt made submap generation yet dummy")

    
    
    
    
    
    
    









Generate_Map("0,0")
while gamestate != -1:
    while gamestate == 0:
        Refresh_Map("0,0")
    if gamestate == 1:
        Encoutner_setup()
    while gamestate == 1:
        Refresh_hud()
